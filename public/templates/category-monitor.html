<div class="page-header">
    <!-- page location, org -->
    <div class="meta">
        <div class="page">
            Category Monitor
        </div>
        <div class="organization">
            <span class="fa fa-institution"></span>
            <span>{{ orgId }}</span>
        </div>
    </div>
    <!-- page specifiction actions/tools -->
    <div class="actions">

    </div>
</div>


<div class="row">
    <div class="col-sm-8">
        <div class="widget">
            <div class="widget-header">Monitored Datasets</div>
            <div class="widget-body">
                <div class="row">
                    <div class="col-md-6" ng-repeat="file in files" >
                        <div class="panel panel-primary" data-ng-include="'category-file-entry.html'">entry</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-4">
        <div class="widget">
            <div class="widget-header">
                Sheets
                <button type="button" class="btn btn-default btn-sm pull-right"  data-ng-click="gatherCategoryCounts()" data-ng-disabled="datasetBusy">
                    <i class="fa fa-leaf"></i>
                    <span>Create new sheet</span>
                </button>
            </div>
            <div class="widget-body">
                <ul class="list-unstyled">
                    <li ng-repeat="sheet in sheets">
                        <a ng-href="{{ sheetUrl(sheet) }}" target="_blank">
                            <i class="fa fa-download"></i>
                            {{ sheet }}
                        </a>
                    </li>
                </ul>
            </div>
        </div>


    </div>
</div>

<script type="text/ng-template" id="category-file-entry.html">
    <div class="panel-heading">
        {{ file.info.metadata.name }}
        <span data-ng-show="file.info.recordCount" class="pull-right">{{ file.info.recordCount.count }}</span>
    </div>
    <div class="panel-body">
        <div data-ng-if="file.progress">
            <progressbar class="progress-striped active" animate="true" value="file.progress.count" max="100" type="success">
                {{ file.progress.message }}
            </progressbar>
        </div>
    </div>
</script>
